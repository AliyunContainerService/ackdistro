apiVersion: sealer.aliyun.com/v1alpha1
kind: Plugin
metadata:
  name: preflight # Specify this plugin name,will dump in $rootfs/plugin dir.
spec:
  type: SHELL
  action: PreInit # PreInit PreInstall PostInstall
  'on': master0
  data: |
    set -e
    [[ "$SkipPreflight" == "true" ]] && exit 0
    for ie in ${IgnoreErrors[@]};do
      IgnoreErrorsFlag="${IgnoreErrorsFlag} --ignore-errors ${ie}"
    done
    IgnoreErrorsFlag="${IgnoreErrorsFlag} --ignore-errors OS"
    trident preflight run -f /root/.sealer/my-cluster/Clusterfile --sealer ${IgnoreErrorsFlag}